(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{33:function(e,t,c){},43:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c.n(n),a=c(15),s=c.n(a),u=(c(33),c(10)),o=c.n(u),i=c(11),l=c(7),d=c(28),y="UPDATE_SYMBOLS",b="CHANGE_RATES",j="REMOVE_CURRENCY",f="ON_FOCUS",p="ADD_CURRENCY",m="GET_SYMBOLS";function O(e,t){return function(){var c=Object(i.a)(o.a.mark((function c(n){var r;return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,fetch("/api/rates/".concat(e,"/").concat(t));case 2:return c.next=4,c.sent.json();case 4:r=c.sent,n({type:b,payload:[r,{base:e,amount:t}]});case 6:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}function h(e){return{type:f,payload:e}}function v(e,t){return{type:p,payload:[e,t]}}function x(){return{type:y}}var g=c(46),S=c(17),E=c(47),N=c(45),C=c(3),_={removeCurrency:function(e){return{type:j,payload:e}},changeRates:O,onFocus:h},w=Object(l.b)((function(e){return{currencys:e.currencys}}),_)((function(e){var t=r.a.useState(e.currency.rate),c=Object(d.a)(t,2),n=c[0],a=c[1];r.a.useEffect((function(){var t=document.getElementById(e.currency.code);Object(g.a)(t,"input").pipe(Object(S.a)((function(e){return e.target.value})),Object(E.a)(400),Object(N.a)()).subscribe((function(t){e.changeRates(e.currency.code,""===t.trim()?0:t)}))}),[]),r.a.useEffect((function(){a(e.currency.rate)}),[e.currency.rate]);var s=e.currency.rmBtnVisibility?{}:{visibility:"hidden"};return Object(C.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-1",children:[Object(C.jsx)("strong",{className:"m-2",children:e.currency.code}),Object(C.jsxs)("div",{className:"d-flex flex-column justify-content-start align-items-end fullWidth",children:[Object(C.jsx)("input",{className:"form-control",type:"text",id:e.currency.code,value:n,onInput:function(e){var t=e.target.value.replace(/[^0-9,.]/g,"");t=t.replace(",","."),a(t)},onFocus:function(){return e.onFocus(e.currency.code)}}),Object(C.jsx)("small",{className:"text-muted",children:e.currency.description})]}),Object(C.jsx)("button",{className:"rmBtn mt-1",style:s,onClick:function(){e.removeCurrency(e.currency.code,e.currency)},children:"\xd7"})]})})),R=Object(l.b)((function(e){return{currencys:e.currencys}}))((function(e){var t=e.currencys;return 0===t.length?Object(C.jsx)("div",{className:"spinner-border m-3"}):Object(C.jsx)("div",{className:"d-flex flex-column mb-4",children:t.map((function(e){return Object(C.jsx)(w,{currency:e},e.code)}))})}));function D(e){var t=e.symbol;return Object(C.jsxs)("option",{value:t.code,children:[t.code," - ",t.description]})}var B={addCurrency:v,changeRates:O,updateSymbols:x},F=Object(l.b)((function(e){return{selectState:e.select,currencys:e.currencys}}),B)((function(e){return Object(C.jsxs)("select",{className:"btn btn-light fullWidth",onChange:function(t){e.addCurrency(t.target.value,!0);var c=e.currencys.filter((function(e){return e.active}))[0]||{};e.changeRates(c.code,c.rate),e.updateSymbols(),t.target.selectedIndex=0},children:[Object(C.jsx)("option",{value:"0",children:"Add currency"}),function(){var t=[];for(var c in e.selectState)t.push(Object(C.jsx)(D,{symbol:e.selectState[c]},e.selectState[c].code));return t}()]})})),T={addCurrency:v,getSymbols:function(){return function(){var e=Object(i.a)(o.a.mark((function e(t){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/symbols");case 2:return e.next=4,e.sent.json();case 4:c=e.sent,t({type:m,payload:c.symbols});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},changeRates:O,updateSymbols:x,onFocus:h},U=Object(l.b)((function(e){return{date:e.date}}),T)((function(e){return r.a.useEffect(Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getSymbols();case 2:return e.defaultCurrencys.forEach((function(t){e.addCurrency(t,!1)})),t.next=5,e.changeRates(e.defaultCurrencys[0],"1");case 5:e.updateSymbols(),e.onFocus(e.defaultCurrencys[0]);case 7:case"end":return t.stop()}}),t)}))),[]),Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{className:"itemWidth",children:[Object(C.jsx)("h2",{className:"mt-4",children:"Currency converter"}),Object(C.jsxs)("span",{className:"m-1",children:["Exchange rate on ",e.date]})]}),Object(C.jsxs)("div",{className:"alert alert-primary itemWidth mt-1",children:[Object(C.jsx)(R,{}),Object(C.jsx)(F,{})]})]})})),L=c(27),I=c(4),k={currencys:[],select:{},symbols:{},date:(new Date).toLocaleDateString()},A=c(22),V=c(26),Y=Object(A.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(I.a)(Object(I.a)({},e),{},{currencys:e.currencys.filter((function(e){return e.code!==t.payload}))});case b:var c=e.currencys.map((function(e){return e.code===t.payload[1].base?e.rate=t.payload[1].amount:e.rate=null===t.payload[0].rates[e.code]?0:t.payload[0].rates[e.code],e}));return Object(I.a)(Object(I.a)({},e),{},{currencys:c,date:new Date(t.payload[0].date).toLocaleDateString()});case f:return Object(I.a)(Object(I.a)({},e),{},{currencys:e.currencys.map((function(e){return t.payload===e.code?e.active=!0:e.active=!1,e}))});case p:if("0"!==t.payload.code){var n=Object(L.a)(e.currencys);return n.push({code:t.payload[0],description:e.symbols[t.payload[0]].description,rate:0,rmBtnVisibility:t.payload[1],active:!1}),Object(I.a)(Object(I.a)({},e),{},{currencys:n})}return e;case m:return Object(I.a)(Object(I.a)({},e),{},{symbols:t.payload});case y:var r=Object(I.a)({},e.symbols);return e.currencys.forEach((function(e){delete r[e.code]})),Object(I.a)(Object(I.a)({},e),{},{select:r});default:return e}}),Object(A.b)(Object(A.a)(V.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));var M=function(){return Object(C.jsx)("div",{className:"d-flex flex-column align-items-center",children:Object(C.jsx)(l.a,{store:Y,children:Object(C.jsx)(U,{defaultCurrencys:["USD","EUR","RUB","BYN"]})})})},W=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,48)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),r(e),a(e),s(e)}))};c(42);s.a.render(Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(M,{})}),document.getElementById("root")),W()}},[[43,1,2]]]);
//# sourceMappingURL=main.7d708c53.chunk.js.map